<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Gallery</title>
    <style>
        /* --- ê¸°ë³¸ ìŠ¤íƒ€ì¼ --- */
        body {
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            font-family: sans-serif;
            color: #333;
        }

        /* --- ìƒë‹¨ ê³ ì • ì»¨íŠ¸ë¡¤ ë°” --- */
        .control-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 10px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            box-sizing: border-box;
        }

        .home-btn {
            text-decoration: none;
            font-size: 20px;
            margin-right: auto;
        }

        input[type="number"] {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 60px;
            text-align: center;
        }

        button {
            padding: 8px 15px;
            background-color: #333;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s;
        }
        button:hover { background-color: #555; }

        .view-btn { background-color: #007bff; }
        .view-btn:hover { background-color: #0056b3; }


        /* --- ê°¤ëŸ¬ë¦¬ ì»¨í…Œì´ë„ˆ --- */
        .container {
            max-width: 600px;
            margin: 90px auto 40px;
            padding: 40px;
            background-color: white;
            min-height: 100vh;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            border-radius: 8px;
        }

        /* --- í•µì‹¬ ìˆ˜ì •: ì‚¬ì§„ ë°•ìŠ¤ ì´ˆê¸° ìƒíƒœ --- */
        .photo-wrapper {
            /* ì¤‘ìš”: ì²˜ìŒì—ëŠ” ì•„ì˜ˆ í™”ë©´ ê³µê°„ì„ ì°¨ì§€í•˜ì§€ ì•Šë„ë¡ ìˆ¨ê¹€ */
            display: none; 
            
            margin-bottom: 60px;
            text-align: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 30px;
            
            /* ë¶€ë“œëŸ½ê²Œ ë‚˜íƒ€ë‚˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ */
            opacity: 0;
            transition: opacity 0.5s ease-in;
        }

        /* ë¡œë”©ì´ ì™„ë£Œë˜ë©´ ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì´ í´ë˜ìŠ¤ë¥¼ ë¶™ì—¬ì¤ë‹ˆë‹¤ */
        .photo-wrapper.loaded {
            display: block; /* ê³µê°„ ì°¨ì§€ */
            animation: fadeIn Effect 0.5s forwards; /* ì„œì„œíˆ ë‚˜íƒ€ë‚¨ */
        }
        
        @keyframes fadeInEffect {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .gallery-list img {
            width: 100%;
            border-radius: 4px;
        }
        .gallery-list .photo-number {
            display: inline-block;
            margin-bottom: 15px;
            font-weight: bold;
            color: #888;
            font-size: 14px;
            letter-spacing: 1px;
        }

        /* --- ëª¨ë“œ 2: ê·¸ë¦¬ë“œ ë·° (ë°”ë‘‘íŒ) --- */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            max-width: 1000px !important;
        }

        .gallery-grid .photo-wrapper.loaded {
            /* ê·¸ë¦¬ë“œ ëª¨ë“œì—ì„œë„ display:block ëŒ€ì‹  grid itemìœ¼ë¡œ ì‘ë™ */
            display: block; 
            margin-bottom: 0;
            position: relative;
            aspect-ratio: 1 / 1;
            overflow: hidden;
            cursor: pointer;
            border-bottom: none;
            padding-bottom: 0;
        }

        .gallery-grid img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.2s;
        }
        .gallery-grid img:hover { transform: scale(1.1); }

        .gallery-grid .photo-number {
            position: absolute;
            top: 5px; left: 5px;
            background: rgba(0,0,0,0.6);
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 4px;
            z-index: 10;
        }

        /* ë¡œë”© ìŠ¤í”¼ë„ˆ (ì„ íƒì‚¬í•­) */
        .loading-msg {
            text-align: center;
            color: #888;
            margin-top: 50px;
            font-size: 14px;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
                margin-top: 70px;
            }
        }
    </style>
</head>
<body>

    <div class="control-bar">
        <a href="index.html" class="home-btn">ğŸ </a>
        <input type="number" id="jumpInput" placeholder="No." min="1">
        <button onclick="jumpToPhoto()">ì´ë™</button>
        <button onclick="toggleView()" class="view-btn" id="viewBtn">ç”° ëª¨ì•„ë³´ê¸°</button>
    </div>

    <div class="container gallery-list" id="galleryContainer">
        <div id="loadingMsg" class="loading-msg">ì‚¬ì§„ì„ ë¶ˆëŸ¬ì˜¤ê³  ìˆìŠµë‹ˆë‹¤...</div>
        <div id="gallery"></div>
    </div>

    <script>
        const gallery = document.getElementById('gallery');
        const container = document.getElementById('galleryContainer');
        const viewBtn = document.getElementById('viewBtn');
        const jumpInput = document.getElementById('jumpInput');
        const loadingMsg = document.getElementById('loadingMsg');

        const maxCheck = 1000;
        const folderPath = 'images/'; // â˜… í´ë”ëª… í™•ì¸
        const defaultExtension = '.PNG'; 

        // ë¡œë”© ì™„ë£Œëœ ì‚¬ì§„ ê°œìˆ˜ ì²´í¬ìš©
        let loadedCount = 0;

        for (let i = 1; i <= maxCheck; i++) {
            const wrapper = document.createElement('div');
            // 'loaded' í´ë˜ìŠ¤ê°€ ì—†ìœ¼ë¯€ë¡œ CSSì— ì˜í•´ í™”ë©´ì— ì•ˆ ë³´ì„ (display: none)
            wrapper.className = 'photo-wrapper'; 
            wrapper.id = 'photo-' + i; 

            wrapper.onclick = function() {
                if(container.classList.contains('gallery-grid')) {
                    toggleView();
                    setTimeout(() => jumpToSpecific(i), 100);
                }
            };
            
            const numberLabel = document.createElement('div');
            numberLabel.className = 'photo-number';
            numberLabel.textContent = `No. ${i}`;
            
            const img = document.createElement('img');
            img.src = folderPath + i + defaultExtension;
            img.alt = `Photo ${i}`;
            img.loading = 'lazy';

            // 1. ë¡œë”© ì„±ê³µ ì‹œ: ë¹„ë¡œì†Œ í™”ë©´ì— ë³´ì—¬ì¤Œ (íˆ¬ëª…ë§í†  í•´ì œ)
            img.onload = function() {
                wrapper.classList.add('loaded'); // CSS display: block ë°œë™
                loadingMsg.style.display = 'none'; // ì²« ì‚¬ì§„ì´ ëœ¨ë©´ ë¡œë”© ë©”ì‹œì§€ ì‚­ì œ
                loadedCount++;
            };

            // 2. ë¡œë”© ì‹¤íŒ¨ ì‹œ: ì¡°ìš©íˆ ì‚­ì œ (í™”ë©´ì— ë‚˜íƒ€ë‚œ ì ë„ ì—†ìœ¼ë¯€ë¡œ ê¹œë¹¡ì„ ì—†ìŒ)
            img.onerror = function() {
                if (this.src.includes('.PNG')) {
                    this.src = this.src.replace('.PNG', '.png');
                } else {
                    wrapper.remove(); // ì¡°ìš©íˆ ì œê±°
                }
            };

            wrapper.appendChild(numberLabel);
            wrapper.appendChild(img);
            gallery.appendChild(wrapper);
        }

        function jumpToPhoto() {
            jumpToSpecific(jumpInput.value);
        }

        function jumpToSpecific(num) {
            const target = document.getElementById('photo-' + num);
            if (target && target.classList.contains('loaded')) {
                target.scrollIntoView({ behavior: 'smooth', block: 'center' });
            } else {
                alert('í•´ë‹¹ ë²ˆí˜¸ì˜ ì‚¬ì§„ì´ ì—†ê±°ë‚˜ ë¡œë”©ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            }
        }

        jumpInput.addEventListener("keypress", function(event) {
            if (event.key === "Enter") jumpToPhoto();
        });

        function toggleView() {
            if (container.classList.contains('gallery-list')) {
                // ê·¸ë¦¬ë“œ ëª¨ë“œ
                container.classList.remove('gallery-list');
                container.classList.add('gallery-grid');
                viewBtn.textContent = 'â‰¡ í¬ê²Œë³´ê¸°';
                gallery.className = 'gallery-grid';
                container.style.maxWidth = '1000px';
                container.style.padding = '20px';
            } else {
                // ë¦¬ìŠ¤íŠ¸ ëª¨ë“œ
                container.classList.remove('gallery-grid');
                container.classList.add('gallery-list');
                viewBtn.textContent = 'ç”° ëª¨ì•„ë³´ê¸°';
                gallery.className = '';
                container.style.maxWidth = '600px'; 
                container.style.padding = '40px';
            }
        }
    </script>
</body>
</html>
